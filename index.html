        // ãƒãƒ£ãƒƒãƒˆãƒ‡ãƒ¼ã‚¿ (å…ƒã®JavaScriptã®chatDataã‚’ã“ã“ã«ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„)
        const chatData = {
            initial: {
                bot: "ã“ã‚“ã«ã¡ã¯ï¼ã‚­ãƒ¼ãƒ—ã‚ªãƒ³ã‚¹ã‚¯ãƒ¼ãƒ«ã®æ¡ˆå†…å½¹ã€ã‚»ãƒ³ã‚µãƒ¼ã§ã™ã€‚\n\nç§ãŸã¡ã®ã‚¹ã‚¯ãƒ¼ãƒ«ã«èˆˆå‘³ã‚’æŒã£ã¦ã„ãŸã ãã€ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼\n\nã‚­ãƒ¼ãƒ—ã‚ªãƒ³ã«ã¤ã„ã¦ã€ã©ã‚“ãªã“ã¨ãŒçŸ¥ã‚ŠãŸã„ã§ã™ã‹ï¼Ÿ",
                questions: [
                    { id: 'about', text: 'ã©ã‚“ãªã‚¹ã‚¯ãƒ¼ãƒ«ãªã®ï¼Ÿ' },
                    { id: 'enjoy', text: 'ã†ã¡ã®å­ã§ã‚‚æ¥½ã—ã‚ã‚‹ï¼Ÿ' },
                    { id: 'beginner', text: 'ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°æœªçµŒé¨“ã§ã‚‚å¤§ä¸ˆå¤«ï¼Ÿ' },
                    { id: 'skills', text: 'ã©ã‚“ãªåŠ›ãŒèº«ã«ã¤ãã®ï¼Ÿ' }
                ]
            },
            about: {
                user: "ã©ã‚“ãªã‚¹ã‚¯ãƒ¼ãƒ«ãªã®ï¼Ÿ",
                bot: "ã‚­ãƒ¼ãƒ—ã‚ªãƒ³ã¯ã€ãŸã ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚’æ•™ãˆã‚‹ã ã‘ã®ã‚¹ã‚¯ãƒ¼ãƒ«ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚\n\nç§ãŸã¡ã®æœ€å¤§ã®ç‰¹å¾´ã¯ã€Œæ­£è§£ã®ãªã„å•ã„ã‚’æ¥½ã—ã‚€ã€ã“ã¨ã§ã™ã€‚\n\nç¤¾ä¼šã«ã¯æ­£è§£ãŒã²ã¨ã¤ã§ã¯ãªã„å ´é¢ãŒãŸãã•ã‚“ã‚ã‚Šã¾ã™ã‚ˆã­ã€‚ãã‚“ãªæ™‚ã«ã€è‡ªåˆ†ã§è€ƒãˆã¦ã€è‡ªåˆ†ã§é¸æŠã—ã¦ã€è‡ªåˆ†ã§è¡Œå‹•ã§ãã‚‹ã€Œè‡ªå¾‹å‹äººæã€ã‚’è‚²ã¦ã‚‹ã“ã¨ãŒç§ãŸã¡ã®ç›®æ¨™ã§ã™ã€‚\n\nãƒ­ãƒœãƒƒãƒˆè£½ä½œã‚„ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚’é€šã˜ã¦ã€èº«è¿‘ãªã‚‚ã®ï¼ˆä¿¡å·æ©Ÿã‚„è‡ªå‹•ãƒ‰ã‚¢ãªã©ï¼‰ã®ä»•çµ„ã¿ã‚’å­¦ã³ã€ãã“ã«è‡ªåˆ†ã®ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’åŠ ãˆã¦ã€ã‚ªãƒªã‚¸ãƒŠãƒ«ã®ä½œå“ã‚’ä½œã£ã¦ã„ãã¾ã™ã€‚",
                questions: [
                    { id: 'different', text: 'ä»–ã®ã‚¹ã‚¯ãƒ¼ãƒ«ã¨ã®é•ã„ã¯ï¼Ÿ' },
                    { id: 'age', text: 'å¯¾è±¡å¹´é½¢ã¯ï¼Ÿ' },
                    { id: 'cost', text: 'è²»ç”¨ã«ã¤ã„ã¦æ•™ãˆã¦' },
                    { id: 'trial', text: 'ä½“é¨“ã¯ã§ãã‚‹ï¼Ÿ' }
                ]
            },
            enjoy: {
                user: "ã†ã¡ã®å­ã§ã‚‚æ¥½ã—ã‚ã‚‹ï¼Ÿ",
                bot: "ã‚‚ã¡ã‚ã‚“æ¥½ã—ã‚ã¾ã™ï¼\n\nã‚­ãƒ¼ãƒ—ã‚ªãƒ³ã§ã¯ã€ãƒ–ãƒ­ãƒƒã‚¯ã€ãƒ‘ã‚ºãƒ«ã€ã‚²ãƒ¼ãƒ ã€ãƒ­ãƒœãƒƒãƒˆãªã©ã€ã‚ãã‚ãã™ã‚‹ã‚«ãƒªã‚­ãƒ¥ãƒ©ãƒ ã‚’ã”ç”¨æ„ã—ã¦ã„ã¾ã™ã€‚\n\néŠã³è¦ç´ ãŒãŸã£ã·ã‚Šã§ã€å¥½å¥‡å¿ƒã®ã¾ã¾å¤¢ä¸­ã§å–ã‚Šçµ„ã‚ã‚‹ã‚“ã§ã™ã€‚å®Ÿéš›ã€å¤šãã®å­ã©ã‚‚ãŸã¡ãŒã€Œå‹‰å¼·ã€ã¨ã„ã†ã‚ˆã‚Šã€ŒéŠã³ã€ã®æ„Ÿè¦šã§é€šã£ã¦ã„ã¾ã™ã€‚\n\nå¤¢ä¸­ã«ãªã£ã¦ã¤ãã‚‹ã“ã¨ã§ç‰©äº‹ã‚’ç†è§£ã—ã€ãã‚ŒãŒè‡ªä¿¡ã«ã¤ãªãŒã‚Šã¾ã™ã€‚è‡ªä¿¡ãŒã¤ãã‹ã‚‰ç¶šã‘ã‚‰ã‚Œã¦ã€ç¶šã‘ã‚‹ã“ã¨ã§æˆé•·ã‚’å®Ÿæ„Ÿã§ãã‚‹ã€‚ãã‚“ãªå¥½å¾ªç’°ãŒç”Ÿã¾ã‚Œã‚‹ã‚“ã§ã™ã€‚",
                questions: [
                    { id: 'pace', text: 'æˆæ¥­ã«ã¤ã„ã¦ã„ã‘ã‚‹ã‹å¿ƒé…...' },
                    { id: 'support', text: 'ã‚µãƒãƒ¼ãƒˆä½“åˆ¶ã¯ï¼Ÿ' },
                    { id: 'class', text: 'ã‚¯ãƒ©ã‚¹ã®é›°å›²æ°—ã¯ï¼Ÿ' },
                    { id: 'parent', text: 'ä¿è­·è€…ã®ã‚µãƒãƒ¼ãƒˆã¯å¿…è¦ï¼Ÿ' }
                ]
            },
            beginner: {
                user: "ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°æœªçµŒé¨“ã§ã‚‚å¤§ä¸ˆå¤«ï¼Ÿ",
                bot: "ã¯ã„ã€ã¾ã£ãŸãå•é¡Œã‚ã‚Šã¾ã›ã‚“ï¼\n\nã»ã¨ã‚“ã©ã®ãŠå­ã•ã¾ãŒåˆå¿ƒè€…ã‹ã‚‰ã‚¹ã‚¿ãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚\n\nå°å­¦ç”Ÿã§ã‚‚ç†è§£ã§ãã‚‹ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚’ä½¿ã†ã®ã§ã€ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—ã§ç›´æ„Ÿçš„ã«ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã§ãã¾ã™ã€‚\n\nãƒ‘ã‚½ã‚³ãƒ³ã®åŸºæœ¬æ“ä½œã‹ã‚‰ä¸å¯§ã«ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã—ã€ã‚¹ãƒ†ãƒƒãƒ—ã‚¢ãƒƒãƒ—å¼ã®ã‚«ãƒªã‚­ãƒ¥ãƒ©ãƒ ã§ã€è‡ªåˆ†ã®ãƒšãƒ¼ã‚¹ã§ç„¡ç†ãªãå­¦ã¹ã‚‹ç’°å¢ƒã‚’æ•´ãˆã¦ã„ã¾ã™ã€‚\n\nå¤§åˆ‡ãªã®ã¯ã€Œã‚„ã£ã¦ã¿ãŸã„ã€ã¨ã„ã†æ°—æŒã¡ã ã‘ã§ã™ï¼",
                questions: [
                    { id: 'curriculum', text: 'ã©ã‚“ãªã“ã¨ã‹ã‚‰å§‹ã‚ã‚‹ã®ï¼Ÿ' },
                    { id: 'homework', text: 'å®¿é¡Œã¯ã‚ã‚‹ï¼Ÿ' },
                    { id: 'schedule', text: 'ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ï¼Ÿ' },
                    { id: 'trial', text: 'ä½“é¨“ã§é›°å›²æ°—ã‚’è¦‹ãŸã„' }
                ]
            },
            skills: {
                user: "ã©ã‚“ãªåŠ›ãŒèº«ã«ã¤ãã®ï¼Ÿ",
                bot: "ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°æŠ€è¡“ã¯ã‚‚ã¡ã‚ã‚“ã§ã™ãŒã€ãã‚Œä»¥ä¸Šã«å¤§åˆ‡ãªåŠ›ãŒèº«ã«ã¤ãã¾ã™ã€‚\n\n1. è‡ªåˆ†ã§è€ƒãˆã‚‹åŠ›ï¼šå•ã„ã‚’ç«‹ã¦ã¦ã€è©¦è¡ŒéŒ¯èª¤ã—ãªãŒã‚‰ç­”ãˆã‚’è¦‹ã¤ã‘ã‚‹\n2. ä¼ãˆã‚‹åŠ›ï¼šä½œã£ãŸä½œå“ã‚’è‡ªåˆ†ã®è¨€è‘‰ã§ç™ºè¡¨ã™ã‚‹çµŒé¨“ã‚’é‡ã­ã‚‹\n3. å”åŠ›ã™ã‚‹åŠ›ï¼šä»²é–“ã¨å¯¾è©±ã—ãªãŒã‚‰ã€ã‚ˆã‚Šè‰¯ã„ã‚‚ã®ã‚’ä½œã‚‹\n4. ç¶šã‘ã‚‹åŠ›ï¼šè‡ªåˆ†ã§é¸ã‚“ã ã“ã¨ã«è²¬ä»»ã‚’æŒã£ã¦å–ã‚Šçµ„ã‚€\n\nã“ã‚Œã‚‰ã¯ã€ã©ã‚“ãªæ™‚ä»£ã€ã©ã‚“ãªè·æ¥­ã§ã‚‚é€šç”¨ã™ã‚‹æ™®éçš„ãªåŠ›ã§ã™ã€‚\n\né€²å­¦ã‚„å°±è·ã ã‘ã§ãªãã€ãã®å…ˆã®äººç”Ÿã‚’è±Šã‹ã«ç”Ÿãã‚‹ãŸã‚ã®åœŸå°ã¨ãªã‚Šã¾ã™ã€‚",
                questions: [
                    { id: 'future', text: 'å°†æ¥ã©ã†å½¹ç«‹ã¤ï¼Ÿ' },
                    { id: 'event', text: 'ç™ºè¡¨ä¼šãªã©ã¯ã‚ã‚‹ï¼Ÿ' },
                    { id: 'graduate', text: 'å’æ¥­å¾Œã‚‚å­¦ã¹ã‚‹ï¼Ÿ' },
                    { id: 'achievement', text: 'æˆæœã‚’å®Ÿæ„Ÿã§ãã‚‹ï¼Ÿ' }
                ]
            },
            different: { // â˜…å¤‰æ›´ç‚¹: ã“ã“ã®questionsã«æ–°ã—ã„è³ªå•ã‚’è¿½åŠ 
                user: "ä»–ã®ã‚¹ã‚¯ãƒ¼ãƒ«ã¨ã®é•ã„ã¯ï¼Ÿ",
                bot: "æœ€å¤§ã®é•ã„ã¯ã€Œæ•™ãˆæ–¹ã€ã§ã™ã€‚\n\nä¸€èˆ¬çš„ãªã‚¹ã‚¯ãƒ¼ãƒ«ã§ã¯ã€å…ˆç”ŸãŒæ­£è§£ã‚’æ•™ãˆã¦ã€ç”Ÿå¾’ãŒãã‚Œã‚’è¦šãˆã‚‹å½¢ãŒå¤šã„ã§ã™ã‚ˆã­ã€‚\n\nã§ã‚‚ã‚­ãƒ¼ãƒ—ã‚ªãƒ³ã§ã¯ã€ç§ãŸã¡ã‹ã‚‰æ­£è§£ã‚’ä¸ãˆã‚‹ã“ã¨ã¯ã—ã¾ã›ã‚“ã€‚ä»£ã‚ã‚Šã«ã€Œã©ã†æ€ã†ï¼Ÿã€ã€Œãªã‚“ã§ãã†æ€ã†ã®ï¼Ÿã€ã¨å•ã„ã‹ã‘ã‚‹ã“ã¨ã§ã€å­ã©ã‚‚ãŸã¡è‡ªèº«ãŒè€ƒãˆã€ç­”ãˆã‚’è¦‹ã¤ã‘ã¦ã„ãã¾ã™ã€‚\n\nã¾ãŸã€æ¯é€±ã€Œã ã‚Œã§ã‚‚Yononakaã€ã¨ã„ã†æ™‚é–“ãŒã‚ã‚Šã€æ­£è§£ã®ãªã„ãŠé¡Œã«ã¤ã„ã¦è‡ªåˆ†ã®æ„è¦‹ã‚’ä½œã‚‹ç·´ç¿’ã‚‚ã—ã¦ã„ã¾ã™ã€‚\n\nã“ã†ã—ãŸå¯¾è©±ã¨æ¢ç©¶ã‚’é€šã˜ã¦ã€è‡ªå¾‹çš„ã«å­¦ã¶åŠ›ã‚’è‚²ã¦ã¦ã„ã‚‹ã‚“ã§ã™ã€‚",
                questions: [
                    { id: 'method', text: 'å…·ä½“çš„ãªæˆæ¥­ã®é€²ã‚æ–¹ã¯ï¼Ÿ' },
                    { id: 'teacher', text: 'å…ˆç”Ÿã¯ã©ã‚“ãªäººï¼Ÿ' },
                    { id: 'why_yononaka_importance', text: 'ãªãœYononakaã§ã€Œæ­£è§£ã®ãªã„å•ã„ã€ã«å–ã‚Šçµ„ã‚€ã®ï¼Ÿ' }, // â† è¿½åŠ ã—ãŸè³ªå•
                    { id: 'cost', text: 'è²»ç”¨ã«ã¤ã„ã¦æ•™ãˆã¦' },
                    { id: 'online_option', text: 'ã‚ªãƒ³ãƒ©ã‚¤ãƒ³å¯¾å¿œã¯ï¼Ÿ' }
                ]
            },
            // â˜…è¿½åŠ : Yononakaã§ã€Œæ­£è§£ã®ãªã„å•ã„ã€ã«å‘ãåˆã†ç†ç”±ã®èª¬æ˜
            why_yononaka_importance: {
                user: "ãªãœYononakaã§ã€Œæ­£è§£ã®ãªã„å•ã„ã€ã«å–ã‚Šçµ„ã‚€ã®ï¼Ÿ",
                bot: "ãã‚Œã¯ã€ã“ã‚Œã‹ã‚‰ã®æ™‚ä»£ã‚’ç”Ÿãã‚‹å­ã©ã‚‚ãŸã¡ã«ã¨ã£ã¦ã€ã¨ã¦ã‚‚å¤§åˆ‡ãªåŠ›ã‚’è‚²ã‚€ãŸã‚ãªã‚“ã§ã™ã€‚\n\n" +
                     "ğŸ§  **å­¦æ ¡ã¨å®Ÿç¤¾ä¼šã®é•ã„**\n" +
                     "å­¦æ ¡ã§ã¯ã€Œæ­£ã—ã„ç­”ãˆã€ãŒã‚ã‚‹å•é¡Œã«å¤šãå–ã‚Šçµ„ã¿ã¾ã™ãŒã€å®Ÿç¤¾ä¼šã‚„äººç”Ÿã«ã¯ã€ãŸã£ãŸä¸€ã¤ã®æ­£è§£ãŒãªã„å•ã„ã®æ–¹ãŒãšã£ã¨å¤šã„ã‚“ã§ã™ã€‚\n" +
                     "ä¾‹ãˆã°ã€ã€Œå‹é”ã¨æ„è¦‹ãŒåˆã‚ãªã„æ™‚ã€ã©ã†ã™ã‚‹ï¼Ÿã€ã‚„ã€Œä½•ã‚’é¸ã‚“ã§è²·ã†ã‹ï¼Ÿã€ã¨ã„ã£ãŸæ—¥å¸¸ã®é¸æŠã‹ã‚‰ã€ã€Œå°†æ¥ã©ã‚“ãªä»•äº‹ã‚’ã—ãŸã„ã‹ï¼Ÿã€ã¨ã„ã£ãŸå¤§ããªå•ã„ã¾ã§ã€ãƒ†ã‚¹ãƒˆã®ã‚ˆã†ãª100ç‚¹ã®ç­”ãˆã¯ã‚ã‚Šã¾ã›ã‚“ã€‚\n" +
                     "ã ã‹ã‚‰ã“ãã€è‡ªåˆ†ã®é ­ã§è€ƒãˆã€ä»–ã®äººã¨æ„è¦‹ã‚’äº¤ã‚ã—ãªãŒã‚‰ã€è‡ªåˆ†ãªã‚Šã®ç´å¾—è§£ã‚’è¦‹ã¤ã‘ã‚‹åŠ›ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚\n\n" +
                     "ğŸ“± **æƒ…å ±ãŒã‚ãµã‚Œã‚‹ç¾ä»£**\n" +
                     "ä»Šã®å­ä¾›ãŸã¡ã¯ã€ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã‚„ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆãŒå½“ãŸã‚Šå‰ã®ç’°å¢ƒã§è‚²ã£ã¦ã„ã¾ã™ã€‚æƒ…å ±ã¯ç°¡å˜ã«æ‰‹ã«å…¥ã‚Šã¾ã™ãŒã€ãã®åé¢ã€ä½•ãŒæœ¬å½“ã«å¤§åˆ‡ã§ã€ã©ã‚Œã‚’ä¿¡ã˜ã‚Œã°ã„ã„ã®ã‹ã€è¦‹æ¥µã‚ã‚‹ã®ãŒé›£ã—ããªã£ã¦ã„ã¾ã™ã€‚\n" +
                     "ã“ã®ã‚ˆã†ãªæ™‚ä»£ã«ã¯ã€èª°ã‹ã‹ã‚‰ä¸ãˆã‚‰ã‚ŒãŸã€Œæ­£è§£ã€ã«é ¼ã‚‹ã®ã§ã¯ãªãã€è‡ªåˆ†è‡ªèº«ã®ä¾¡å€¤è¦³ã‚„åˆ¤æ–­åŸºæº–ã§è€ƒãˆã‚‹ç¿’æ…£ãŒã€ã¾ã™ã¾ã™é‡è¦ã«ãªã£ã¦ãã‚‹ã‚“ã§ã™ã€‚\n\n" +
                     "ğŸŒ **å¤‰åŒ–ã®æ¿€ã—ã„æ™‚ä»£ã«å¿…è¦ãªåŠ›**\n" +
                     "æŠ€è¡“ã®é€²åŒ–ã¯ç›®è¦šã¾ã—ãã€ç¤¾ä¼šã®ã‚ã‚Šæ–¹ã‚‚å¤šæ§˜åŒ–ã—ã¦ã„ã¾ã™ã€‚AIã¨å…±ã«åƒãæœªæ¥ã€ç’°å¢ƒå•é¡Œã¸ã®å¯¾å¿œãªã©ã€å­ã©ã‚‚ãŸã¡ã¯ã“ã‚Œã¾ã§ã®å¸¸è­˜ãŒé€šç”¨ã—ãªã„ã‚ˆã†ãªã€æ–°ã—ã„èª²é¡Œã«ç›´é¢ã—ã¦ã„ãã§ã—ã‚‡ã†ã€‚\n" +
                     "ã€ŒAIã¨ã©ã†å”åŠ›ã—ã¦ã„ãï¼Ÿã€ã€Œè‡ªåˆ†ã‚‰ã—ã•ã£ã¦ä½•ã ã‚ã†ï¼Ÿã€ã“ã†ã—ãŸå•ã„ã«ã€æ±ºã¾ã£ãŸç­”ãˆã‚„ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚\n" +
                     "ã—ã‹ã—ã€è‡ªåˆ†ã®é ­ã§è€ƒãˆã€è‡ªåˆ†ã®è¨€è‘‰ã§è¡¨ç¾ã—ã€ä»–ã®äººã¨å¯¾è©±ã‚’é‡ã­ã‚‹ã“ã¨ã§ã€ä¸€æ­©ãšã¤ã€Œè‡ªåˆ†ãªã‚Šã®ç­”ãˆã€ã«è¿‘ã¥ã„ã¦ã„ãã“ã¨ãŒã§ãã¾ã™ã€‚\n\n" +
                     "ğŸ’¡ **ã ã‹ã‚‰ã€Yononakaã§ã¯â€¦**\n" +
                     "ç§ãŸã¡ã¯ã€Yononakaã¨ã„ã†æ™‚é–“ã‚’é€šã˜ã¦ã€ã€Œæ­£è§£ã®ãªã„å•ã„ã«å‘ãåˆã†ç¿’æ…£ã€ã‚’å­ã©ã‚‚ãŸã¡ã®æ—¥å¸¸ã«å–ã‚Šå…¥ã‚ŒãŸã„ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚\n" +
                     "ãã‚Œã«ã‚ˆã£ã¦è‚²ã¾ã‚Œã‚‹æ€è€ƒåŠ›ã€å¯¾è©±åŠ›ã€åˆ¤æ–­åŠ›ã€å…±æ„ŸåŠ›ã¨ã„ã£ãŸåŠ›ã¯ã€å­¦åŠ›ã ã‘ã§ãªãã€ã“ã‚Œã‹ã‚‰ã®ç¤¾ä¼šã‚’ã—ãªã‚„ã‹ã«ã€ãã—ã¦åŠ›å¼·ãç”ŸãæŠœããŸã‚ã®å¤§åˆ‡ãªåœŸå°ã«ãªã‚‹ã¨ä¿¡ã˜ã¦ã„ã¾ã™ã€‚",
                questions: [
                    { id: 'method', text: 'Yononakaã®å…·ä½“çš„ãªé€²ã‚æ–¹ã¯ï¼Ÿ' },
                    { id: 'skills', text: 'ä»–ã«ã©ã‚“ãªåŠ›ãŒèº«ã«ã¤ãã®ï¼Ÿ' },
                    { id: 'trial', text: 'ä½“é¨“ã—ã¦ã¿ãŸã„' },
                    { id: 'initial', text: 'æœ€åˆã®è³ªå•ã«æˆ»ã‚‹' }
                ]
            },
            age: {
                user: "å¯¾è±¡å¹´é½¢ã¯ï¼Ÿ",
                bot: "å°å­¦ç”Ÿã‹ã‚‰ä¸­å­¦ç”ŸãŒä¸­å¿ƒã§ã™ãŒã€ã€Œã‚„ã£ã¦ã¿ãŸã„ã€ã¨ã„ã†æ°—æŒã¡ãŒã‚ã‚Œã°ã€å­¦å¹´ã¯å•ã„ã¾ã›ã‚“ã€‚\n\nå®Ÿéš›ã«ã€å°å­¦1å¹´ç”Ÿã‹ã‚‰ä¸­å­¦3å¹´ç”Ÿã¾ã§ã€å¹…åºƒã„å¹´é½¢ã®å­ã©ã‚‚ãŸã¡ãŒä¸€ç·’ã«å­¦ã‚“ã§ã„ã¾ã™ã€‚\n\nç•°å¹´é½¢ã§ã®å­¦ã³åˆã„ã‚‚ã€ã‚­ãƒ¼ãƒ—ã‚ªãƒ³ã®ç‰¹å¾´ã®ã²ã¨ã¤ã€‚å¹´ä¸Šã®å­ãŒå¹´ä¸‹ã®å­ã‚’ã‚µãƒãƒ¼ãƒˆã—ãŸã‚Šã€å¹´ä¸‹ã®å­ã®æ–¬æ–°ãªã‚¢ã‚¤ãƒ‡ã‚¢ã«å¹´ä¸Šã®å­ãŒåˆºæ¿€ã‚’å—ã‘ãŸã‚Šã€‚\n\nãã‚“ãªç’°å¢ƒãŒã€ç¤¾ä¼šæ€§ã‚’è‚²ã‚€è‰¯ã„æ©Ÿä¼šã«ãªã£ã¦ã„ã¾ã™ã€‚",
                questions: [
                    { id: 'level', text: 'å­¦å¹´åˆ¥ã®ã‚¯ãƒ©ã‚¹åˆ†ã‘ã¯ï¼Ÿ' },
                    { id: 'highschool', text: 'é«˜æ ¡ç”Ÿä»¥ä¸Šã‚‚å¯èƒ½ï¼Ÿ' },
                    { id: 'trial', text: 'ä½“é¨“ã§ç¢ºèªã—ãŸã„' },
                    { id: 'schedule', text: 'é€šãˆã‚‹æ™‚é–“å¸¯ã¯ï¼Ÿ' }
                ]
            },
            cost: {
                user: "è²»ç”¨ã«ã¤ã„ã¦æ•™ãˆã¦",
                bot: "è²»ç”¨ã¯ã‚³ãƒ¼ã‚¹ã«ã‚ˆã£ã¦ç•°ãªã‚Šã¾ã™ãŒã€æœˆ2å›ã®æˆæ¥­ãŒåŸºæœ¬ã¨ãªã£ã¦ã„ã¾ã™ã€‚\n\nå…„å¼Ÿå‰²å¼•ã‚‚ã”ç”¨æ„ã—ã¦ã„ã¾ã™ã—ã€è¤‡æ•°è¬›åº§ã®å—è¬›ã‚‚å¯èƒ½ã§ã™ã€‚\n\nãŠæ”¯æ‰•ã„æ–¹æ³•ã¯ã€ç¾é‡‘ã€å£åº§æŒ¯æ›¿ã€PayPayæ®‹é«˜æ±ºæ¸ˆã‹ã‚‰ãŠé¸ã³ã„ãŸã ã‘ã¾ã™ã€‚\n\nå…¥é€€ä¼šã¯è‡ªç”±ã§ã€é•ç´„é‡‘ãªã©ã¯ä¸€åˆ‡ã‚ã‚Šã¾ã›ã‚“ã€‚\n\nè©³ã—ã„æ–™é‡‘è¡¨ã¯ã€ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ã§ã”ç¢ºèªã„ãŸã ãã‹ã€ç„¡æ–™ä½“é¨“ã®éš›ã«è©³ã—ãã”èª¬æ˜ã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚",
                questions: [
                    { id: 'trial', text: 'ç„¡æ–™ä½“é¨“ã¯ã‚ã‚‹ï¼Ÿ' },
                    { id: 'material', text: 'æ•™æè²»ã¯åˆ¥ï¼Ÿ' },
                    { id: 'discount', text: 'å‰²å¼•åˆ¶åº¦ã«ã¤ã„ã¦' },
                    { id: 'contact', text: 'è©³ã—ãç›¸è«‡ã—ãŸã„' }
                ]
            },
            trial: {
                user: "ä½“é¨“ã¯ã§ãã‚‹ï¼Ÿ",
                bot: "ã¯ã„ï¼ç„¡æ–™ä½“é¨“ã‚’å®Ÿæ–½ã—ã¦ã„ã¾ã™ã€‚\n\nä½“é¨“ã ã‘ã®å‚åŠ ã‚‚å¤§æ­“è¿ã§ã™ã€‚å®Ÿéš›ã®æˆæ¥­ã®é›°å›²æ°—ã‚’æ„Ÿã˜ã¦ã„ãŸã ã‘ã‚‹ã‚ˆã†ã€é€šå¸¸ã®æˆæ¥­ã¨åŒã˜å†…å®¹ã‚’ä½“é¨“ã—ã¦ã„ãŸã ã‘ã¾ã™ã€‚\n\næŒã¡ç‰©ã¯ä¸€åˆ‡ä¸è¦ã€‚æ‰‹ã¶ã‚‰ã§ãŠè¶Šã—ãã ã•ã„ï¼ä½“é¨“ã‚­ãƒƒãƒˆã‚„ãƒ‘ã‚½ã‚³ãƒ³ã¯ã™ã¹ã¦ã“ã¡ã‚‰ã§ã”ç”¨æ„ã—ã¾ã™ã€‚\n\nä½“é¨“å¾Œã«ç„¡ç†ãªå‹§èª˜ãªã©ã¯ä¸€åˆ‡ã‚ã‚Šã¾ã›ã‚“ã®ã§ã€å®‰å¿ƒã—ã¦ãŠå­ã•ã¾ã«åˆã†ã‹ã©ã†ã‹ã‚’ã˜ã£ãã‚Šã”æ¤œè¨ãã ã•ã„ã€‚",
                questions: [
                    { id: 'apply', text: 'ä½“é¨“ã«ç”³ã—è¾¼ã¿ãŸã„ï¼' },
                    { id: 'schedule', text: 'ä½“é¨“ã§ãã‚‹æ—¥æ™‚ã¯ï¼Ÿ' },
                    { id: 'parent_join', text: 'ä¿è­·è€…ã‚‚è¦‹å­¦ã§ãã‚‹ï¼Ÿ' },
                    { id: 'after_trial', text: 'ä½“é¨“å¾Œã®æµã‚Œã¯ï¼Ÿ' }
                ]
            },
            pace: {
                user: "æˆæ¥­ã«ã¤ã„ã¦ã„ã‘ã‚‹ã‹å¿ƒé…...",
                bot: "ãã®å¿ƒé…ã¯ä¸è¦ã§ã™ï¼\n\nã‚­ãƒ¼ãƒ—ã‚ªãƒ³ã§ã¯ã€ä¸€äººã²ã¨ã‚Šã®ãƒšãƒ¼ã‚¹ã‚’å¤§åˆ‡ã«ã—ã¦ã„ã¾ã™ã€‚ã‚¹ãƒ†ãƒƒãƒ—ã‚¢ãƒƒãƒ—å¼ã®ã‚«ãƒªã‚­ãƒ¥ãƒ©ãƒ ã§ã€ç†è§£åº¦ã«åˆã‚ã›ã¦é€²ã‚ã‚‰ã‚Œã¾ã™ã€‚\n\nåˆ†ã‹ã‚‰ãªã„ã“ã¨ãŒã‚ã‚Œã°ã€ã‚¹ã‚¿ãƒƒãƒ•ãŒã™ãã«ã‚µãƒãƒ¼ãƒˆã€‚1ã‚¯ãƒ©ã‚¹12åã¾ã§ã®å°‘äººæ•°åˆ¶ã§ã€è¤‡æ•°ã®ã‚¹ã‚¿ãƒƒãƒ•ãŒè¦‹å®ˆã£ã¦ã„ã‚‹ã®ã§ã€ãã‚ç´°ã‹ãªãƒ•ã‚©ãƒ­ãƒ¼ãŒã§ãã¾ã™ã€‚\n\nã¾ãŸã€æ¬ å¸­ã—ãŸå ´åˆã¯æŒ¯æ›¿å—è¬›ã‚‚å¯èƒ½ã€‚ç„¡ç†ãªãç¶šã‘ã‚‰ã‚Œã‚‹ç’°å¢ƒã‚’æ•´ãˆã¦ã„ã¾ã™ã€‚",
                questions: [
                    { id: 'support', text: 'ã©ã‚“ãªã‚µãƒãƒ¼ãƒˆãŒã‚ã‚‹ï¼Ÿ' },
                    { id: 'class', text: 'ã‚¯ãƒ©ã‚¹ã®é›°å›²æ°—ã¯ï¼Ÿ' },
                    { id: 'trial', text: 'ä½“é¨“ã§ç¢ºèªã—ãŸã„' },
                    { id: 'initial', text: 'ä»–ã®è³ªå•ã‚’è¦‹ã‚‹' }
                ]
            },
            apply: {
                user: "ä½“é¨“ã«ç”³ã—è¾¼ã¿ãŸã„ï¼",
                bot: "ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼\n\nç„¡æ–™ä½“é¨“ã®ãŠç”³ã—è¾¼ã¿ã¯ã€ä¸‹ã®ãƒœã‚¿ãƒ³ã‹ã‚‰Googleãƒ•ã‚©ãƒ¼ãƒ ã«ã¦å—ã‘ä»˜ã‘ã¦ã„ã¾ã™ã€‚\n\nãŠç”³ã—è¾¼ã¿å¾Œã€æ‹…å½“è€…ã‹ã‚‰æ—¥ç¨‹èª¿æ•´ã®ã”é€£çµ¡ã‚’ã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚\n\nä½“é¨“å½“æ—¥ã¯ã€ãŠå­ã•ã¾ã®ã€Œã‚„ã£ã¦ã¿ãŸã„ã€ã¨ã„ã†æ°—æŒã¡ã ã‘ãŠæŒã¡ãã ã•ã„ã€‚ãã£ã¨æ¥½ã—ã„æ™‚é–“ã«ãªã‚‹ã¨æ€ã„ã¾ã™ï¼\n\nã”ä¸æ˜ãªç‚¹ãŒã‚ã‚Œã°ã€ãŠæ°—è»½ã«ãŠå•ã„åˆã‚ã›ãã ã•ã„ã­ã€‚",
                questions: [
                    { id: 'contact_form_link', text: 'ç”³ã—è¾¼ã¿ãƒ•ã‚©ãƒ¼ãƒ ã¸' },
                    { id: 'more_info_link', text: 'ã‚‚ã£ã¨è©³ã—ãçŸ¥ã‚ŠãŸã„' },
                    { id: 'initial', text: 'æœ€åˆã®è³ªå•ã«æˆ»ã‚‹' }
                ]
            },
            support: {
                user: "ã‚µãƒãƒ¼ãƒˆä½“åˆ¶ã¯ï¼Ÿ",
                bot: "å……å®Ÿã—ãŸã‚µãƒãƒ¼ãƒˆä½“åˆ¶ã‚’æ•´ãˆã¦ã„ã¾ã™ï¼\n\n1. å°‘äººæ•°åˆ¶ï¼š1ã‚¯ãƒ©ã‚¹12åã¾ã§ã§ã€è¤‡æ•°ã®ã‚¹ã‚¿ãƒƒãƒ•ãŒã‚µãƒãƒ¼ãƒˆ\n2. å€‹åˆ¥ãƒ•ã‚©ãƒ­ãƒ¼ï¼šã¤ã¾ãšã„ã¦ã„ã‚‹ã¨ã“ã‚ã‚’è¦‹é€ƒã•ãšã€ã™ãã«ã‚µãƒãƒ¼ãƒˆ\n3. æŒ¯æ›¿åˆ¶åº¦ï¼šæ¬ å¸­æ™‚ã‚‚å®‰å¿ƒã®æŒ¯æ›¿å—è¬›ãŒå¯èƒ½\n4. ä¿è­·è€…é€£æºï¼šLINEã§æˆæ¥­ã®æ§˜å­ã‚’å‹•ç”»ã§ãŠé€ã‚Šã—ã¾ã™\n5. è³ªå•å¯¾å¿œï¼šæˆæ¥­å¤–ã§ã‚‚è³ªå•ã‚’å—ã‘ä»˜ã‘ã¦ã„ã¾ã™\n\nã€Œã§ããªã„ã€ã‚’ã€Œã§ãã‚‹ã€ã«å¤‰ãˆã‚‹ç¬é–“ã‚’ã€ã‚¹ã‚¿ãƒƒãƒ•å…¨å“¡ã§æ”¯ãˆã¾ã™ï¼",
                questions: [
                    { id: 'parent', text: 'ä¿è­·è€…ã®é–¢ã‚ã‚Šæ–¹ã¯ï¼Ÿ' },
                    { id: 'class', text: 'ã‚¯ãƒ©ã‚¹ã®é›°å›²æ°—ã¯ï¼Ÿ' },
                    { id: 'trial', text: 'ä½“é¨“ã§ç¢ºèªã—ãŸã„' },
                    { id: 'initial', text: 'ä»–ã®è³ªå•ã‚’è¦‹ã‚‹' }
                ]
            },
            class: {
                user: "ã‚¯ãƒ©ã‚¹ã®é›°å›²æ°—ã¯ï¼Ÿ",
                bot: "ã¨ã£ã¦ã‚‚ã‚¢ãƒƒãƒˆãƒ›ãƒ¼ãƒ ã§æ¥½ã—ã„é›°å›²æ°—ã§ã™ï¼\n\nå­ã©ã‚‚ãŸã¡ã¯ã€Œå…ˆç”Ÿã€ã¨ã„ã†ã‚ˆã‚Šã€Œä¸€ç·’ã«è€ƒãˆã¦ãã‚Œã‚‹ãŠå…„ã•ã‚“ãƒ»ãŠå§‰ã•ã‚“ã€ã¨ã„ã†æ„Ÿè¦šã§ã‚¹ã‚¿ãƒƒãƒ•ã¨æ¥ã—ã¦ã„ã¾ã™ã€‚\n\nç•°å¹´é½¢ã®å­ã©ã‚‚ãŸã¡ãŒåŠ©ã‘åˆã„ãªãŒã‚‰å­¦ã¶ã®ã§ã€è‡ªç„¶ã¨å”åŠ›ã™ã‚‹åŠ›ã‚‚èº«ã«ã¤ãã¾ã™ã€‚\n\nã€Œé–“é•ãˆã¦ã‚‚ã„ã„ã€ã€Œäººã¨é•ã£ã¦ã‚‚ã„ã„ã€ã¨ã„ã†å®‰å¿ƒæ„ŸãŒã‚ã‚‹ã‹ã‚‰ã€ã¿ã‚“ãªè‡ªç”±ã«ç™ºæƒ³ã‚’åºƒã’ã¦ã„ã¾ã™ã€‚\n\nç¬‘ã„å£°ãŒçµ¶ãˆãªã„ã€ãã‚“ãªæ•™å®¤ã§ã™ï¼",
                questions: [
                    { id: 'event', text: 'ã‚¤ãƒ™ãƒ³ãƒˆãªã©ã¯ï¼Ÿ' },
                    { id: 'achievement', text: 'å­ã©ã‚‚ãŸã¡ã®æˆæœã¯ï¼Ÿ' },
                    { id: 'trial', text: 'å®Ÿéš›ã«è¦‹ã¦ã¿ãŸã„' },
                    { id: 'initial', text: 'æœ€åˆã®è³ªå•ã«æˆ»ã‚‹' }
                ]
            },
            parent: {
                user: "ä¿è­·è€…ã®ã‚µãƒãƒ¼ãƒˆã¯å¿…è¦ï¼Ÿ",
                bot: "ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®çŸ¥è­˜ã¯ä¸€åˆ‡å¿…è¦ã‚ã‚Šã¾ã›ã‚“ï¼\n\nãŠé¡˜ã„ã—ãŸã„ã®ã¯ã€ãŠå­ã•ã¾ã®ã€Œä»Šæ—¥ã“ã‚“ãªã®ä½œã£ãŸã‚ˆï¼ã€ã¨ã„ã†è©±ã‚’èã„ã¦ã‚ã’ã‚‹ã“ã¨ã€‚\n\nã€Œã©ã†ã‚„ã£ã¦ä½œã£ãŸã®ï¼Ÿã€ã€Œãªã‚“ã§ãã†ã—ãŸã®ï¼Ÿã€ã¨èã„ã¦ã‚ã’ã‚‹ã ã‘ã§ã€ãŠå­ã•ã¾ã®æ€è€ƒã¯ã•ã‚‰ã«æ·±ã¾ã‚Šã¾ã™ã€‚\n\næˆæ¥­ã®æ§˜å­ã¯LINEã§å‹•ç”»ã‚’ãŠé€ã‚Šã™ã‚‹ã®ã§ã€ã”å®¶åº­ã§ã‚‚è©±é¡Œã«ã—ã¦ã„ãŸã ã‘ã¾ã™ã€‚\n\nä¸€ç·’ã«æ¥½ã—ã‚“ã§ã„ãŸã ã‘ã‚‹ã“ã¨ãŒã€ä½•ã‚ˆã‚Šã®ã‚µãƒãƒ¼ãƒˆã§ã™ï¼",
                questions: [
                    { id: 'report', text: 'æˆæ¥­ã®æ§˜å­ã‚’çŸ¥ã‚‹æ–¹æ³•ã¯ï¼Ÿ' },
                    { id: 'homework', text: 'å®¶ã§ã®èª²é¡Œã¯ï¼Ÿ' },
                    { id: 'consultation', text: 'ç›¸è«‡ã§ãã‚‹ï¼Ÿ' },
                    { id: 'initial', text: 'ä»–ã®è³ªå•ã‚’è¦‹ã‚‹' }
                ]
            },
            curriculum: {
                user: "ã©ã‚“ãªã“ã¨ã‹ã‚‰å§‹ã‚ã‚‹ã®ï¼Ÿ",
                bot: "æœ€åˆã¯æ¥½ã—ã„ã¨ã“ã‚ã‹ã‚‰å§‹ã‚ã¾ã™ï¼\n\n1. ãƒ‘ã‚½ã‚³ãƒ³ã®åŸºæœ¬æ“ä½œï¼ˆãƒã‚¦ã‚¹ã‚„ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ï¼‰\n2. ãƒ–ãƒ­ãƒƒã‚¯ã‚’çµ„ã¿ç«‹ã¦ã¦ç°¡å˜ãªãƒ­ãƒœãƒƒãƒˆä½œã‚Š\n3. ä¿¡å·æ©Ÿãªã©èº«è¿‘ãªã‚‚ã®ã®ä»•çµ„ã¿ã‚’å­¦ã¶\n4. ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã§å‹•ã‹ã—ã¦ã¿ã‚‹\n5. è‡ªåˆ†ã®ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’åŠ ãˆã¦ã‚¢ãƒ¬ãƒ³ã‚¸\n\nã„ããªã‚Šé›£ã—ã„ã“ã¨ã¯ã—ã¾ã›ã‚“ã€‚ã€Œã§ããŸï¼ã€ã¨ã„ã†æˆåŠŸä½“é¨“ã‚’ç©ã¿é‡ã­ãªãŒã‚‰ã€å°‘ã—ãšã¤ã‚¹ãƒ†ãƒƒãƒ—ã‚¢ãƒƒãƒ—ã—ã¦ã„ãã¾ã™ã€‚\n\nå¤§åˆ‡ãªã®ã¯æ¥½ã—ã‚€ã“ã¨ã€‚æ¥½ã—ã„ã‹ã‚‰ç¶šãã€ç¶šãã‹ã‚‰æˆé•·ã™ã‚‹ï¼",
                questions: [
                    { id: 'language', text: 'ä½¿ã†ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã¯ï¼Ÿ' },
                    { id: 'project', text: 'ã©ã‚“ãªä½œå“ã‚’ä½œã‚‹ï¼Ÿ' },
                    { id: 'trial', text: 'ä½“é¨“ã—ã¦ã¿ãŸã„' },
                    { id: 'initial', text: 'æœ€åˆã«æˆ»ã‚‹' }
                ]
            },
            homework: {
                user: "å®¿é¡Œã¯ã‚ã‚‹ï¼Ÿ",
                bot: "å¼·åˆ¶çš„ãªå®¿é¡Œã¯ã‚ã‚Šã¾ã›ã‚“ï¼\n\nãŸã ã—ã€ã€Œã‚‚ã£ã¨ã‚„ã‚ŠãŸã„ï¼ã€ã¨ã„ã†å­ã«ã¯ã€è‡ªç”±èª²é¡Œã‚’ã”ç”¨æ„ã—ã¦ã„ã¾ã™ã€‚\n\næˆæ¥­ã§ä½œã£ãŸä½œå“ã‚’å®¶ã§ã‚‚å†ç¾ã—ã¦ã¿ãŸã‚Šã€æ–°ã—ã„ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’è€ƒãˆã¦ããŸã‚Šã€‚ãã‚Œã‚’æ¬¡ã®æˆæ¥­ã§ç™ºè¡¨ã™ã‚‹ã¨ã€ã¿ã‚“ãªã‹ã‚‰ã€Œã™ã”ã„ï¼ã€ã¨è¨€ã‚ã‚Œã¦ã€ã•ã‚‰ã«ã‚„ã‚‹æ°—ãŒã‚¢ãƒƒãƒ—ï¼\n\nã€Œã‚„ã‚‰ã•ã‚Œã‚‹ã€ã®ã§ã¯ãªãã€Œã‚„ã‚ŠãŸã„ã€ã‹ã‚‰å–ã‚Šçµ„ã‚€ã€‚ãã‚ŒãŒã‚­ãƒ¼ãƒ—ã‚ªãƒ³ã‚¹ã‚¿ã‚¤ãƒ«ã§ã™ã€‚",
                questions: [
                    { id: 'home_support', text: 'å®¶ã§ã®ã‚µãƒãƒ¼ãƒˆã¯ï¼Ÿ' },
                    { id: 'schedule', text: 'æˆæ¥­ã®é »åº¦ã¯ï¼Ÿ' },
                    { id: 'balance', text: 'ä»–ã®ç¿’ã„äº‹ã¨ã®ä¸¡ç«‹ã¯ï¼Ÿ' },
                    { id: 'initial', text: 'ä»–ã®è³ªå•ã‚’è¦‹ã‚‹' }
                ]
            },
            schedule: {
                user: "ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ï¼Ÿ",
                bot: "åŸºæœ¬ã¯æœˆ2å›ã€ç„¡ç†ã®ãªã„ãƒšãƒ¼ã‚¹ã§é€šãˆã¾ã™ã€‚\n\nå¹³æ—¥ã®å¤•æ–¹ã‚„åœŸæ›œæ—¥ãªã©ã€è¤‡æ•°ã®æ™‚é–“å¸¯ã‚’ã”ç”¨æ„ã—ã¦ã„ã‚‹ã®ã§ã€ä»–ã®ç¿’ã„äº‹ã¨ã‚‚ä¸¡ç«‹ã—ã‚„ã™ã„ã§ã™ã€‚\n\n1å›ã®æˆæ¥­ã¯90åˆ†ã€‚é›†ä¸­åŠ›ãŒç¶šãã€ã¡ã‚‡ã†ã©ã„ã„é•·ã•ã§ã™ã€‚\n\næ¬ å¸­æ™‚ã¯æŒ¯æ›¿ã‚‚å¯èƒ½ãªã®ã§ã€ä½“èª¿ä¸è‰¯ã‚„å­¦æ ¡è¡Œäº‹ãŒã‚ã£ã¦ã‚‚å®‰å¿ƒã€‚\n\nè©³ã—ã„æ™‚é–“å‰²ã¯ã€ä½“é¨“æ™‚ã«ã”ç›¸è«‡ãã ã•ã„ã€‚ãŠå­ã•ã¾ã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã«åˆã‚ã›ã¦èª¿æ•´ã—ã¾ã™ï¼",
                questions: [
                    { id: 'location', text: 'æ•™å®¤ã®å ´æ‰€ã¯ï¼Ÿ' },
                    { id: 'online_option', text: 'ã‚ªãƒ³ãƒ©ã‚¤ãƒ³å—è¬›ã¯ï¼Ÿ' },
                    { id: 'trial', text: 'ä½“é¨“ã®äºˆç´„ã‚’ã—ãŸã„' },
                    { id: 'initial', text: 'æœ€åˆã«æˆ»ã‚‹' }
                ]
            },
            future: {
                user: "å°†æ¥ã©ã†å½¹ç«‹ã¤ï¼Ÿ",
                bot: "ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚¹ã‚­ãƒ«ã ã‘ã§ãªãã€ã©ã‚“ãªè·æ¥­ã§ã‚‚å¿…è¦ãªåŠ›ãŒèº«ã«ã¤ãã¾ã™ã€‚\n\nä¾‹ãˆã°...\nãƒ»åŒ»å¸«ï¼šæ‚£è€…ã•ã‚“ã®è©±ã‚’èãã€æœ€é©ãªæ²»ç™‚æ³•ã‚’è€ƒãˆã‚‹\nãƒ»çµŒå–¶è€…ï¼šå¸‚å ´ã‚’åˆ†æã—ã€æ–°ã—ã„ãƒ“ã‚¸ãƒã‚¹ã‚’å‰µé€ ã™ã‚‹\nãƒ»æ•™å¸«ï¼šç”Ÿå¾’ä¸€äººã²ã¨ã‚Šã«åˆã£ãŸæŒ‡å°æ³•ã‚’å·¥å¤«ã™ã‚‹\nãƒ»ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ï¼šèª²é¡Œã‚’è¦‹ã¤ã‘ã€æŠ€è¡“ã§è§£æ±ºç­–ã‚’ä½œã‚‹\n\nã©ã®è·æ¥­ã§ã‚‚ã€Œè€ƒãˆã‚‹åŠ›ã€ã€Œä¼ãˆã‚‹åŠ›ã€ã€Œå‰µã‚‹åŠ›ã€ã¯å¿…é ˆã€‚\n\nAIæ™‚ä»£ã ã‹ã‚‰ã“ãã€äººé–“ã«ã—ã‹ã§ããªã„å‰µé€ çš„ãªä»•äº‹ãŒé‡è¦ã«ãªã‚Šã¾ã™ã€‚ãã®åœŸå°ã‚’ä»Šã‹ã‚‰è‚²ã¦ã¦ã„ã‚‹ã‚“ã§ã™ï¼",
                questions: [
                    { id: 'graduate', text: 'å’æ¥­ç”Ÿã®é€²è·¯ã¯ï¼Ÿ' },
                    { id: 'achievement', text: 'å…·ä½“çš„ãªæˆæœã¯ï¼Ÿ' },
                    { id: 'skills', text: 'èº«ã«ã¤ãåŠ›ã‚’ã‚‚ã£ã¨è©³ã—ã' },
                    { id: 'initial', text: 'ä»–ã®è³ªå•ã‚’è¦‹ã‚‹' }
                ]
            },
            event: {
                user: "ç™ºè¡¨ä¼šãªã©ã¯ã‚ã‚‹ï¼Ÿ",
                bot: "å¹´3å›ã€ãƒ­ãƒœãƒƒãƒˆç™ºè¡¨ä¼šã‚’é–‹å‚¬ã—ã¦ã„ã¾ã™ï¼\n\nãƒ†ãƒ¼ãƒã«æ²¿ã£ã¦ã€ã‚ªãƒªã‚¸ãƒŠãƒ«ãƒ­ãƒœãƒƒãƒˆã‚’è£½ä½œã€‚ä¾‹ãˆã°ã€Œä¾¿åˆ©ãªç”Ÿæ´»ãƒ­ãƒœãƒƒãƒˆã€ã€Œæœªæ¥ã®ä¹—ã‚Šç‰©ã€ãªã©ã€‚\n\nå­ã©ã‚‚ãŸã¡ã¯æ•°é€±é–“ã‹ã‘ã¦æº–å‚™ã—ã€å½“æ—¥ã¯ä¿è­·è€…ã®å‰ã§å ‚ã€…ã¨ç™ºè¡¨ï¼æœ€åˆã¯æ¥ãšã‹ã—ãŒã£ã¦ã„ãŸå­ã‚‚ã€å›ã‚’é‡ã­ã‚‹ã”ã¨ã«è‡ªä¿¡æº€ã€…ã«ã€‚\n\nã¾ãŸã€ã€Œã ã‚Œã§ã‚‚Yononakaã€ã§ã¯ã€æ­£è§£ã®ãªã„ãŠé¡Œã«ã¤ã„ã¦ã¿ã‚“ãªã§æ„è¦‹äº¤æ›ã€‚\n\nã“ã†ã—ãŸçµŒé¨“ãŒã€äººå‰ã§è©±ã™åŠ›ã‚„ã€è‡ªåˆ†ã®è€ƒãˆã‚’ä¼ãˆã‚‹åŠ›ã‚’è‚²ã¦ã¾ã™ï¼",
                questions: [
                    { id: 'weekly', text: 'æ™®æ®µã®æˆæ¥­ã§ã®ç™ºè¡¨ã¯ï¼Ÿ' },
                    { id: 'community', text: 'ä»–ã®ç”Ÿå¾’ã¨ã®äº¤æµã¯ï¼Ÿ' },
                    { id: 'achievement', text: 'ç™ºè¡¨ä¼šã®æˆæœã¯ï¼Ÿ' },
                    { id: 'initial', text: 'æœ€åˆã«æˆ»ã‚‹' }
                ]
            },
            graduate: {
                user: "å’æ¥­å¾Œã‚‚å­¦ã¹ã‚‹ï¼Ÿ",
                bot: "ã‚‚ã¡ã‚ã‚“ã§ã™ï¼å’æ¥­ã¯ã€Œæ–°ãŸãªå­¦ã³ã®å§‹ã¾ã‚Šã€ã§ã™ã€‚\n\nå’æ¥­å¾Œã¯...\nãƒ»PBLï¼ˆèª²é¡Œè§£æ±ºå‹å­¦ç¿’ï¼‰ã‚³ãƒ¼ã‚¹ã§ã•ã‚‰ã«æ·±ã„å­¦ã³ã¸\nãƒ»Yononakaãªã©ã®ã‚¤ãƒ™ãƒ³ãƒˆã«å‚åŠ \nãƒ»ã‚¹ã‚¯ãƒ¼ãƒ«ã®ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã¨ã—ã¦å¾Œè¼©ã‚’ã‚µãƒãƒ¼ãƒˆ\nãƒ»ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã§æƒ…å ±äº¤æ›\n\nå®Ÿéš›ã€é«˜æ ¡ç”Ÿã«ãªã£ã¦ã‚‚ã‚¤ãƒ™ãƒ³ãƒˆã«é¡”ã‚’å‡ºã—ã¦ãã‚Œã‚‹å­ã‚„ã€å¤§å­¦ã§ãƒ­ãƒœãƒƒãƒˆå·¥å­¦ã‚’å°‚æ”»ã™ã‚‹å­ã‚‚ã€‚\n\nã€Œå­¦ã³ç¶šã‘ã‚‹ã€ã¨ã„ã†ã‚­ãƒ¼ãƒ—ã‚ªãƒ³ã®ç†å¿µã¯ã€å’æ¥­å¾Œã‚‚ç¶šã„ã¦ã„ãã¾ã™ï¼",
                questions: [
                    { id: 'alumni', text: 'å’æ¥­ç”Ÿã®æ´»èºã¯ï¼Ÿ' },
                    { id: 'advanced', text: 'ä¸Šç´šã‚³ãƒ¼ã‚¹ã«ã¤ã„ã¦' },
                    { id: 'community', text: 'ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã«ã¤ã„ã¦' },
                    { id: 'initial', text: 'ä»–ã®è³ªå•ã‚’è¦‹ã‚‹' }
                ]
            },
            achievement: {
                user: "æˆæœã‚’å®Ÿæ„Ÿã§ãã‚‹ï¼Ÿ",
                bot: "ã¯ã„ã€å¿…ãšå®Ÿæ„Ÿã—ã¦ã„ãŸã ã‘ã¾ã™ï¼\n\n3ãƒ¶æœˆå¾Œï¼šã€Œã§ããŸï¼ã€ãŒå¢—ãˆã¦ã€è‡ªä¿¡ãŒã¤ã\n6ãƒ¶æœˆå¾Œï¼šè‡ªåˆ†ã®ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’å½¢ã«ã§ãã‚‹ã‚ˆã†ã«\n1å¹´å¾Œï¼šå ‚ã€…ã¨ç™ºè¡¨ã§ãã‚‹å§¿ã«æˆé•·\n\nä¿è­·è€…ã®æ–¹ã‹ã‚‰ã¯...\nã€Œå­¦æ ¡ã®ç™ºè¡¨ã§ã‚‚ç©æ¥µçš„ã«æ‰‹ã‚’æŒ™ã’ã‚‹ã‚ˆã†ã«ãªã£ãŸã€\nã€Œè‡ªåˆ†ã§è€ƒãˆã¦è¡Œå‹•ã™ã‚‹ã“ã¨ãŒå¢—ãˆãŸã€\nã€Œé›£ã—ã„ã“ã¨ã«ã‚‚è«¦ã‚ãšã«æŒ‘æˆ¦ã™ã‚‹ã‚ˆã†ã«ãªã£ãŸã€\n\nã¨ã„ã†å¬‰ã—ã„å£°ã‚’ãŸãã•ã‚“ã„ãŸã ã„ã¦ã„ã¾ã™ã€‚\n\næ¯å›ã®æˆæ¥­å‹•ç”»ã§ã€æˆé•·ã®éç¨‹ã‚‚è¦‹å®ˆã‚Œã¾ã™ï¼",
                questions: [
                    { id: 'voice', text: 'ä»–ã®ä¿è­·è€…ã®å£°ã¯ï¼Ÿ' },
                    { id: 'trial', text: 'å®Ÿéš›ã«ä½“é¨“ã—ãŸã„' },
                    { id: 'apply', text: 'ç”³ã—è¾¼ã¿ãŸã„ï¼' },
                    { id: 'initial', text: 'æœ€åˆã«æˆ»ã‚‹' }
                ]
            },
            method: {
                user: "å…·ä½“çš„ãªæˆæ¥­ã®é€²ã‚æ–¹ã¯ï¼Ÿ",
                bot: "90åˆ†ã®æˆæ¥­ã¯ã“ã‚“ãªæµã‚Œã§ã™ï¼š\n\n1. ã ã‚Œã§ã‚‚Yononakaï¼ˆ10åˆ†ï¼‰\n   æ­£è§£ã®ãªã„ãŠé¡Œã«ã¤ã„ã¦æ„è¦‹ã‚’æ›¸ã\n\n2. ä»Šæ—¥ã®ãƒ†ãƒ¼ãƒç¢ºèªï¼ˆ10åˆ†ï¼‰\n   ä½•ã‚’ä½œã‚‹ã‹ã€ã©ã‚“ãªä»•çµ„ã¿ã‹ç†è§£\n\n3. è£½ä½œã‚¿ã‚¤ãƒ ï¼ˆ60åˆ†ï¼‰\n   å‹•ç”»ã‚’è¦‹ãªãŒã‚‰è‡ªåˆ†ã®ãƒšãƒ¼ã‚¹ã§è£½ä½œ\n   åˆ†ã‹ã‚‰ãªã„ã¨ã“ã‚ã¯ã‚¹ã‚¿ãƒƒãƒ•ãŒã‚µãƒãƒ¼ãƒˆ\n\n4. ç™ºè¡¨ã‚¿ã‚¤ãƒ ï¼ˆ10åˆ†ï¼‰\n   ä½œã£ãŸä½œå“ã‚’è‡ªåˆ†ã®è¨€è‘‰ã§èª¬æ˜\n\nãƒã‚¤ãƒ³ãƒˆã¯ã€Œæ•™ãˆã™ããªã„ã€ã“ã¨ã€‚\nå­ã©ã‚‚ãŒè‡ªåˆ†ã§æ°—ã¥ãã€å­¦ã¶ç¬é–“ã‚’å¤§åˆ‡ã«ã—ã¦ã„ã¾ã™ï¼",
                questions: [
                    { id: 'material', text: 'ä½¿ã†æ•™æã¯ï¼Ÿ' },
                    { id: 'teacher', text: 'ã‚¹ã‚¿ãƒƒãƒ•ã«ã¤ã„ã¦' },
                    { id: 'trial', text: 'æˆæ¥­ã‚’ä½“é¨“ã—ãŸã„' },
                    { id: 'initial', text: 'ä»–ã®è³ªå•ã‚’è¦‹ã‚‹' }
                ]
            },
            teacher: {
                user: "å…ˆç”Ÿã¯ã©ã‚“ãªäººï¼Ÿ",
                bot: "ã€Œå…ˆç”Ÿã€ã¨ã„ã†ã‚ˆã‚Šã€Œå­¦ã³ã®ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã€ã§ã™ï¼\n\nç§ãŸã¡ã‚¹ã‚¿ãƒƒãƒ•ã¯ã€ç­”ãˆã‚’æ•™ãˆã‚‹å­˜åœ¨ã§ã¯ãªãã€ä¸€ç·’ã«è€ƒãˆã€å­ã©ã‚‚ãŸã¡ã®ã€Œãªãœï¼Ÿã€ã€Œã©ã†ã—ã¦ï¼Ÿã€ã«å¯„ã‚Šæ·»ã†å­˜åœ¨ã€‚\n\nãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®å°‚é–€çŸ¥è­˜ã¯ã‚‚ã¡ã‚ã‚“ã€å­ã©ã‚‚ãŸã¡ã®å€‹æ€§ã‚’å¤§åˆ‡ã«ã—ã€ãã‚Œãã‚Œã®ãƒšãƒ¼ã‚¹ã«åˆã‚ã›ãŸã‚µãƒãƒ¼ãƒˆãŒã§ãã‚‹ã‚ˆã†ç ”ä¿®ã‚’é‡ã­ã¦ã„ã¾ã™ã€‚\n\nã€Œã§ããªã„ã€ã¨è¨€ã†å­ã«ã¯ã€Œä¸€ç·’ã«è€ƒãˆã‚ˆã†ã€\nã€Œåˆ†ã‹ã‚‰ãªã„ã€ã¨è¨€ã†å­ã«ã¯ã€Œã©ã“ã¾ã§åˆ†ã‹ã£ãŸï¼Ÿã€\n\nãã‚“ãªå£°ã‹ã‘ã§ã€å­ã©ã‚‚ãŸã¡ã®è‡ªå¾‹çš„ãªå­¦ã³ã‚’æ”¯ãˆã¦ã„ã¾ã™ï¼",
                questions: [
                    { id: 'ratio', text: 'å…ˆç”Ÿã¨ç”Ÿå¾’ã®æ¯”ç‡ã¯ï¼Ÿ' },
                    { id: 'training', text: 'ã‚¹ã‚¿ãƒƒãƒ•ã®ç ”ä¿®ã¯ï¼Ÿ' },
                    { id: 'support', text: 'ã‚µãƒãƒ¼ãƒˆä½“åˆ¶ã«ã¤ã„ã¦' },
                    { id: 'initial', text: 'æœ€åˆã«æˆ»ã‚‹' }
                ]
            },
            location: {
                user: "æ•™å®¤ã®å ´æ‰€ã¯ã©ã“ã§ã™ã‹ï¼Ÿ",
                bot: "ç§ãŸã¡ã®æ•™å®¤ã¯[ã“ã“ã«æ•™å®¤ã®å ´æ‰€ã‚„ã‚¢ã‚¯ã‚»ã‚¹æƒ…å ±ã‚’è¨˜è¿°]ã«ã‚ã‚Šã¾ã™ã€‚è©³ç´°ãªã‚¢ã‚¯ã‚»ã‚¹æ–¹æ³•ã¯ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã§ã‚‚ã”ç¢ºèªã„ãŸã ã‘ã¾ã™ã€‚\nï¼ˆã“ã®éƒ¨åˆ†ã¯å®Ÿéš›ã®æ•™å®¤æƒ…å ±ã«ç½®ãæ›ãˆã¦ãã ã•ã„ï¼‰",
                questions: [
                    { id: 'online_option', text: 'ã‚ªãƒ³ãƒ©ã‚¤ãƒ³å¯¾å¿œã¯ï¼Ÿ' },
                    { id: 'facility', text: 'æ•™å®¤ã®è¨­å‚™ã¯ï¼Ÿ' },
                    { id: 'trial', text: 'è¦‹å­¦ã—ãŸã„' },
                    { id: 'initial', text: 'ä»–ã®è³ªå•ã‚’è¦‹ã‚‹' }
                ]
            },
            online_option: {
                 user: "ã‚ªãƒ³ãƒ©ã‚¤ãƒ³å¯¾å¿œã¯ï¼Ÿ",
                 bot: "ã¯ã„ã€ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã«ã‚‚å¯¾å¿œã—ã¦ã„ã¾ã™ï¼\n\nåŸºæœ¬çš„ã«ã¯ãƒªã‚¢ãƒ«ãªæ•™å®¤ã§ã®æˆæ¥­ãŒä¸­å¿ƒã§ã™ãŒã€ä»¥ä¸‹ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã§ã‚‚å‚åŠ å¯èƒ½ã§ã™ï¼š\n\nãƒ»Yononakaï¼ˆå¯¾è©±å‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ï¼‰\nãƒ»ç‰¹åˆ¥ã‚¤ãƒ™ãƒ³ãƒˆ\nãƒ»å€‹åˆ¥ç›¸è«‡\n\nã¾ãŸã€é æ–¹ã®æ–¹ã‚„ã€ä¸€æ™‚çš„ã«é€šãˆãªã„å ´åˆã®ã‚ªãƒ³ãƒ©ã‚¤ãƒ³æŒ¯æ›¿ã‚‚æ¤œè¨å¯èƒ½ã§ã™ã€‚\n\næ•™å®¤ã®ã€Œã¿ã‚“ãªã§å­¦ã¶ã€é›°å›²æ°—ã‚‚å¤§åˆ‡ã«ã—ãªãŒã‚‰ã€æŸ”è»Ÿã«å¯¾å¿œã•ã›ã¦ã„ãŸã ãã¾ã™ï¼",
                 questions: [
                     { id: 'location', text: 'æ•™å®¤ã®å ´æ‰€ã¯ï¼Ÿ' },
                     { id: 'trial', text: 'ä½“é¨“ã—ã¦ã¿ãŸã„' },
                     { id: 'initial', text: 'ä»–ã®è³ªå•ã‚’è¦‹ã‚‹' }
                 ]
            }
            // ä»–ã®æ—¢å­˜ã®ä¼šè©±ãƒ‡ãƒ¼ã‚¿ã¯ãã®ã¾ã¾
        };

        // (å…ƒã®JavaScriptã‚³ãƒ¼ãƒ‰ã®ç¶šãã¯å¤‰æ›´ãªã—)
        // ...
        let isBotTyping = false;

        // DOMè¦ç´ 
        const chatArea = document.getElementById('chatArea');
        const questionButtonsContainer = document.getElementById('questionButtons');
        const characterUploadInput = document.getElementById('character-upload');
        const characterImagePreview = document.getElementById('character-image');
        const characterPlaceholder = document.querySelector('.character-placeholder');

        let defaultBotAvatarSrc = ''; // ç¾åœ¨ã®ãƒœãƒƒãƒˆã‚¢ãƒã‚¿ãƒ¼ã®URLã‚’ä¿æŒ

        // ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç”»åƒã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å‡¦ç†
        characterUploadInput.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file && file.type.startsWith('image/')) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    const imageUrl = event.target.result;
                    characterImagePreview.src = imageUrl;
                    characterImagePreview.style.display = 'block';
                    characterPlaceholder.style.display = 'none';
                    updateDefaultBotAvatar(imageUrl); // æ–°ã—ã„ç”»åƒã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¨ã—ã¦è¨­å®š

                    // è¡¨ç¤ºæ¸ˆã¿ã®ãƒœãƒƒãƒˆã‚¢ãƒã‚¿ãƒ¼ã‚‚æ›´æ–°
                    document.querySelectorAll('.bot-avatar img.dynamic-avatar').forEach(img => {
                        img.src = imageUrl;
                    });
                };
                reader.readAsDataURL(file);
            } else if (file) {
                alert("ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚");
            }
        });

        // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒœãƒƒãƒˆã‚¢ãƒã‚¿ãƒ¼URLã‚’æ›´æ–°ã™ã‚‹é–¢æ•°
        function updateDefaultBotAvatar(src = '') {
            defaultBotAvatarSrc = src;
        }


        // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ãƒãƒ£ãƒƒãƒˆã‚¨ãƒªã‚¢ã«è¿½åŠ ã™ã‚‹é–¢æ•°
        function addMessage(type, content, callback) {
            const messageWrapper = document.createElement('div');
            messageWrapper.className = `message ${type}`;

            const messageContentDiv = document.createElement('div');
            messageContentDiv.className = 'message-content';

            if (type === 'bot') {
                const avatarDiv = document.createElement('div');
                avatarDiv.className = 'bot-avatar';

                if (defaultBotAvatarSrc) {
                    const img = document.createElement('img');
                    img.src = defaultBotAvatarSrc;
                    img.alt = "ãƒœãƒƒãƒˆã‚¢ãƒã‚¿ãƒ¼";
                    img.classList.add("dynamic-avatar");
                    avatarDiv.appendChild(img);
                } else {
                    avatarDiv.textContent = 'ğŸ¤–';
                }
                messageWrapper.appendChild(avatarDiv);
                messageWrapper.appendChild(messageContentDiv);

                chatArea.appendChild(messageWrapper);
                scrollChatToBottom();

                isBotTyping = true;
                toggleQuestionButtons(true);
                showTypingIndicator(messageContentDiv, () => {
                    // çµµæ–‡å­—ã‚’æ´»ã‹ã™ãŸã‚ã«ã€HTMLã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã¸ã®å¤‰æ›ã¯è¡Œã‚ãšã€\nã‚’<br>ã«ç½®æ›ã™ã‚‹ã®ã¿
                    messageContentDiv.innerHTML = content.replace(/\n/g, '<br>');
                    isBotTyping = false;
                    // ãƒœã‚¿ãƒ³ã®æœ‰åŠ¹åŒ–ã¯ handleQuestion å†…ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã§å®Ÿè¡Œ
                    if (callback) callback();
                    scrollChatToBottom();
                });
            } else { // User message
                messageContentDiv.innerHTML = content.replace(/\n/g, '<br>');
                messageWrapper.appendChild(messageContentDiv);
                chatArea.appendChild(messageWrapper);
                scrollChatToBottom();
                if (callback) callback();
            }
        }

        // ã‚¿ã‚¤ãƒ”ãƒ³ã‚°ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã‚’è¡¨ç¤º
        function showTypingIndicator(messageContentElement, callback) {
            messageContentElement.innerHTML = `
                <div class="typing-indicator">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
            `;
            scrollChatToBottom();
            setTimeout(callback, 1200 + Math.random() * 800);
        }

        // è³ªå•ãƒœã‚¿ãƒ³ã‚’æ›´æ–°
        function updateQuestions(questions) {
            questionButtonsContainer.innerHTML = '';
            if (!questions || questions.length === 0) {
                const noMoreQuestionsButton = document.createElement('button');
                noMoreQuestionsButton.className = 'question-btn';
                noMoreQuestionsButton.textContent = 'æœ€åˆã®è³ªå•ã«æˆ»ã‚‹';
                noMoreQuestionsButton.onclick = () => handleQuestion('initial');
                questionButtonsContainer.appendChild(noMoreQuestionsButton);
                return;
            }

            questions.forEach(q => {
                const button = document.createElement('button');
                button.className = 'question-btn';
                button.textContent = q.text;
                if (q.id) {
                    button.onclick = () => handleQuestion(q.id);
                } else {
                    console.warn("è³ªå•ãƒ‡ãƒ¼ã‚¿ã«IDãŒã‚ã‚Šã¾ã›ã‚“:", q);
                    button.disabled = true;
                }
                button.disabled = isBotTyping;
                questionButtonsContainer.appendChild(button);
            });
        }

        // è³ªå•ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–/æœ‰åŠ¹åŒ–
        function toggleQuestionButtons(disabled) {
            questionButtonsContainer.querySelectorAll('.question-btn').forEach(btn => {
                btn.disabled = disabled;
            });
        }

        // è³ªå•ã‚’å‡¦ç†
        function handleQuestion(questionId) {
            if (isBotTyping) return;

            // ç‰¹åˆ¥ãªãƒªãƒ³ã‚¯å‡¦ç†ã‚’å…ˆã«è¡Œã†
            if (questionId === 'contact_form_link') {
                window.open('https://docs.google.com/forms/d/e/1FAIpQLScqAKJ3CgsLb-COaE_fqsUwVGKcoiab21a3f5KrLYEzDHNzVQ/viewform', '_blank', 'noopener,noreferrer');
            } else if (questionId === 'more_info_link') {
                window.open('https://www.keeponlearning.fun/', '_blank', 'noopener,noreferrer');
            }

            const data = chatData[questionId];
            if (!data) {
                console.error(`è³ªå•IDã«å¯¾å¿œã™ã‚‹ãƒãƒ£ãƒƒãƒˆãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“: ${questionId}`);
                addMessage('bot', 'ç”³ã—è¨³ã‚ã‚Šã¾ã›ã‚“ã€ãã®è³ªå•ã«ã¯ç¾åœ¨ãŠç­”ãˆã§ãã¾ã›ã‚“ã€‚ä»–ã®è³ªå•ã‚’é¸ã‚“ã§ã„ãŸã ã‘ã¾ã™ã‹ï¼Ÿ', () => {
                    updateQuestions(chatData.initial.questions);
                    toggleQuestionButtons(false);
                });
                return;
            }

            toggleQuestionButtons(true);

            if (data.user) {
                addMessage('user', data.user, () => {
                    setTimeout(() => {
                        addMessage('bot', data.bot, () => {
                            updateQuestions(data.questions);
                            toggleQuestionButtons(false);
                        });
                    }, 400 + Math.random() * 400);
                });
            } else {
                 addMessage('bot', data.bot, () => {
                    updateQuestions(data.questions);
                    toggleQuestionButtons(false);
                });
            }
        }

        // ãƒãƒ£ãƒƒãƒˆã‚¨ãƒªã‚¢ã‚’ä¸€ç•ªä¸‹ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
        function scrollChatToBottom() {
            chatArea.scrollTop = chatArea.scrollHeight;
        }

        // åˆæœŸåŒ–é–¢æ•°
        function init() {
            const initialData = chatData.initial;
            if (initialData) {
                setTimeout(() => {
                    addMessage('bot', initialData.bot, () => {
                        updateQuestions(initialData.questions);
                        toggleQuestionButtons(false);
                    });
                }, 700);
            } else {
                console.error("åˆæœŸãƒãƒ£ãƒƒãƒˆãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“!");
            }
            updateDefaultBotAvatar(characterImagePreview.src && characterImagePreview.style.display === 'block' ? characterImagePreview.src : '');
        }

        // DOMContentLoadedå¾Œã«é–¢æ•°ã‚’å®Ÿè¡Œ
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
